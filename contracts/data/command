# don't run --allow-insecure-unlock in production!
apk add --update curl
# Configures geth with the deployer and authority accounts. This includes:
#   1. Configuring the deployer's keystore
#   2. Configuring the authority's keystore
#   3. Configuring the keystores' password
#   4. Unlocking the accounts by their indexes
geth --datadir data/ init data/geth/genesis.json
echo "" > /tmp/geth-blank-password
# Starts geth
geth \
--nousb \
--miner.gastarget 7500000 \
--miner.gasprice "10" \
--datadir data/ \
--syncmode 'full' \
--networkid 1337 \
--keystore=./data/geth/keystore/ \
--password /tmp/geth-blank-password \
--unlock "0,1" \
--http \
--http.api personal,web3,eth,net \
--http.addr 0.0.0.0 \
--http.vhosts=* \
--http.port 8545 \
--ws \
--ws.addr 0.0.0.0 \
--ws.origins '*' \
--ws.api personal,web3,eth,net \
--rpc.allow-unprotected-txs \
--mine \
--allow-insecure-unlock


# Since we realize people/tooling issuing unprotected transactions canâ€™t change overnight,
# Geth v1.10.0 supports reverting to the old behavior and accepting non-EIP155 transactions via --rpc.allow-unprotected-txs.
# Be advised that this is a temporary mechanism that will be removed long term.
