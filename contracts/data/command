# don't run --allow-insecure-unlock in production!
apk add --update curl
# Configures geth with the deployer and authority accounts. This includes:
#   1. Configuring the deployer's keystore
#   2. Configuring the authority's keystore
#   3. Configuring the keystores' password
#   4. Unlocking the accounts by their indexes
geth --datadir data/ init data/geth/genesis.json
echo "" > /tmp/geth-blank-password
# Starts geth
geth \
--miner.gastarget 7500000 \
--miner.gasprice "10" \
--datadir data/ \
--syncmode 'full' \
--networkid 1337 \
--gasprice '1' \
--keystore=./data/geth/keystore/ \
--password /tmp/geth-blank-password \
--unlock "0,1" \
--rpc \
--rpcapi personal,web3,eth,net \
--rpcaddr 0.0.0.0 \
--rpcvhosts=* \
--rpcport=8545 \
--ws \
--wsaddr 0.0.0.0 \
--wsorigins='*' \
--mine \
--allow-insecure-unlock
